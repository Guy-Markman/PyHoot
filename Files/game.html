<!doctype html>
<html>

	<head>
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<title>PyHoot!</title>
		<script>
			var check_move = window.setInterval(function() {
				check_move_to_next();
			}, 1000);

			function disconnect_user() {
				var xhttp = new XMLHttpRequest();
				xhttp.onreadystatechange = function() {
					if (this.readyState == 4 && this.status == 200) {
						window.location.href = '/';
					}
				};
				xhttp.open("GET", "diconnect_user", true);
				xhttp.send();
			}

			function switch_wait_question() {
				var wait_style_display = document.getElementById("wait").style.display;
				var question_style_display = document.getElementById("question").style.display;
				clearInterval(check_move);
				wait_style_display = [question_style_display, question_style_display = wait_style_display][0];
				document.getElementById("wait").style.display = wait_style_display;
				document.getElementById("question").style.display = question_style_display;
			}

			function sent_answer(letter) {
				var xhttp = new XMLHttpRequest();
				xhttp.onreadystatechange = function() {
					if (this.readyState == 4 && this.status == 200) {
						clearInterval(timer);
						switch_wait_question();
					}
				};
				xhttp.open("GET", "answer?letter=" + letter, true);
				xhttp.send();
			}

			function check_move_to_next() {
				var xhttp = new XMLHttpRequest();
				xhttp.onreadystatechange = function() {
					if (this.readyState == 4 && this.status == 200) {
						if (this.responseText == "True") {
							console.log("switch");
							switch_wait_question();
						}
					}
				};
				xhttp.open("GET", "check_move_next_page", true);
				xhttp.send();
			}

		</script>
	</head>

	<body>
		<center>
			<p id="wait" style="display:inline">
				<!--Will check when it should switch to question everysecond-->
				<font size="6">Please wait</font>
				<br /><br />
				<input type="button" value="Disconnect" onclick="disconnect_user();" />
			</p>
			<div id="question" style="display:none">
				<table>
					<tr>
						<td>
							<button type="button" style="float:left; height: 150px;
							 width: 150px; font-size: 50px;" onclick="sent_answer('A');">
								A
							</button>
						</td>
						<td>
							<button type="button" style="float:left; height: 150px;
							width: 150px; font-size: 50px;" onclick="sent_answer('B');">
								B
							</button>
						</td>
					</tr>
					<tr>
						<td>
							<button type="button" style="float:left; height: 150px;
							 width: 150px; font-size: 50px;" onclick="sent_answer('C');">
								C
							</button>
						</td>
						<td>
							<button type="button" style="float:left; height: 150px;
							 width: 150px; font-size: 50px;" onclick="sent_answer('D');">
								D
							</button>
						</td>
					</tr>
				</table>
			</div>
		</center>
	</body>

</html>
